{"name":"macro to update all items a token owns with the tokens img","permission":{"default":0,"NDNjYjU4MTMyYzYy":3},"type":"script","flags":{"combat-utility-belt":{"macroTrigger":""},"furnace":{"runAsGM":false}},"scope":"global","command":"(async ()=> {\r\n  if(!token) return;\r\n\r\n  let img = token.data.img;\r\n  let updates = [];\r\n\r\n  token.actor.items.forEach(item => {\r\n    if(item.data.img === \"icons/svg/mystery-man.svg\")\r\n    {\r\n      updates.push({ _id : item.id , img });\r\n    }\r\n  });\r\n\r\n  await token.actor.updateEmbeddedEntity(\"OwnedItem\", updates);\r\n})();","author":"NDNjYjU4MTMyYzYy","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"G1qygmZquJWV0eRi"}
